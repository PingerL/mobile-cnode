(function(t){function e(e){for(var n,s,c=e[0],r=e[1],l=e[2],u=0,f=[];u<c.length;u++)s=c[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&f.push(i[s][0]),i[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);p&&p(e);while(f.length)f.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,c=1;c<a.length;c++){var r=a[c];0!==i[r]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},i={app:0},o=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/mobile-cnode/dist/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var p=r;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("4de4"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t._m(0),a("router-view")],1)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("div",{staticClass:"logo"},[n("img",{attrs:{src:a("d686"),alt:""}})])])}],s=(a("5c0b"),a("2877")),c={},r=Object(s["a"])(c,i,o,!1,null,null,null),l=r.exports,p=a("8c4f"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"topic"},[a("div",{staticClass:"tabbar"},[a("span",{staticClass:"cell active",on:{click:t.changeTab}},[t._v("全部")]),a("span",{staticClass:"cell",on:{click:t.changeTab}},[t._v("精华")]),a("span",{staticClass:"cell",on:{click:t.changeTab}},[t._v("分享")]),a("span",{staticClass:"cell",on:{click:t.changeTab}},[t._v("问答")]),a("span",{staticClass:"cell",on:{click:t.changeTab}},[t._v("招聘")])]),a("div",{ref:"wrapper",staticClass:"wrapper"},[a("ul",{ref:"content",staticClass:"content"},t._l(t.topicList,(function(e){return a("router-link",{key:e.id,staticClass:"libox",attrs:{to:"/home/topicinfo/"+e.id,tag:"li"}},[a("img",{attrs:{src:e.author.avatar_url,alt:""}}),a("div",{staticClass:"visit"},[a("span",[t._v(t._s(e.reply_count)+"/")]),a("span",[t._v(t._s(e.visit_count))])]),a("span",{staticClass:"title"},[t._v(t._s(e.title))]),a("span",{staticClass:"last_reply"},[t._v(t._s(t._f("formateDate")(e.last_reply_at)))])])})),1),t._m(0)])])},f=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loading-wrapper"},[n("img",{attrs:{src:a("cf1c"),alt:""}})])}],h=(a("99af"),a("4160"),a("159b"),a("1157")),d=a.n(h),v={data:function(){return{topicList:[],tab:"all",page:1}},created:function(){this.getTopic()},mounted:function(){this.loadmore()},methods:{getTopic:function(){var t=this;this.$http.get("https://cnodejs.org/api/v1/topics",{params:{page:this.page,limit:20,tab:this.tab}}).then((function(e){t.topicList=t.topicList.concat(e.data.data),console.dir(e.data.data)}))},changeStyle:function(t){var e=document.querySelectorAll(".tabbar .cell");e.forEach((function(t){t.classList.remove("active")})),t.classList.add("active")},changeTab:function(t){var e=t.target,a=t.target.innerText;switch(this.topicList=[],a){case"全部":this.tab="all",this.getTopic(),this.changeStyle(e);break;case"精华":this.tab="good",this.getTopic(),this.changeStyle(e);break;case"分享":this.tab="share",this.getTopic(),this.changeStyle(e);break;case"问答":this.tab="ask",this.getTopic(),this.changeStyle(e);break;case"招聘":this.tab="job",this.getTopic(),this.changeStyle(e);break}},isToBottom:function(t,e){return t.height()+t.scrollTop()+30>e.height()},loadmore:function(){var t,e=this,a=d()(".wrapper");a.on("scroll",(function(){var n=d()(".content");t&&clearTimeout(t),t=setTimeout((function(){e.isToBottom(a,n)&&(console.log("ok"),e.page++,e.getTopic())}),500)}))}}},g=v,_=(a("7410"),Object(s["a"])(g,u,f,!1,null,"c6803358",null)),m=_.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"topicinfo"},[t.isShow?n("div",{staticClass:"loading-wrapper"},[n("img",{attrs:{src:a("cf1c"),alt:""}})]):n("div",[n("h1",[t._v(t._s(t.topicInfo.title))]),n("div",{staticClass:"detail"},[n("span",[t._v("发布于："+t._s(t._f("formateDate")(t.topicInfo.create_at)))]),n("span",[t._v("作者："+t._s(t.topicInfo.author.loginname))]),n("span",[t._v(t._s(t.topicInfo.visit_count)+"次浏览")])]),n("hr"),n("div",{domProps:{innerHTML:t._s(t.topicInfo.content)}}),n("div",{staticClass:"comment"},[n("p",{staticClass:"comm_head"},[t._v(t._s(t.topicInfo.replies.length)+"回复")]),n("hr"),t._l(t.topicInfo.replies,(function(e,a){return n("ul",{key:e.id},[n("li",[n("div",{staticClass:"img"},[n("img",{attrs:{src:e.author.avatar_url,alt:""}})]),n("div",[n("a",{attrs:{href:"#"}},[t._v(t._s(e.author.loginname)+" ")]),n("span",[t._v(" "+t._s(a+1)+"楼 ")]),n("span",[t._v(t._s(t._f("formateDate")(e.create_at)))]),n("p",{domProps:{innerHTML:t._s(e.content)}})])])])}))],2)])])},y=[],T={data:function(){return{id:this.$route.params.id,topicInfo:[],isShow:!1}},created:function(){this.isShow=!0,this.getTopicInfo()},methods:{getTopicInfo:function(){var t=this;this.$http.get("https://cnodejs.org/api/v1/topic/".concat(this.id)).then((function(e){t.topicInfo=e.data.data,t.isShow=!1,console.dir(e.data.data)}))}}},w=T,C=(a("7aa8"),Object(s["a"])(w,b,y,!1,null,null,null)),k=C.exports;n["a"].use(p["a"]);var j=[{path:"/",name:"Home",component:m},{path:"/home/topicinfo/:id",component:k}],I=new p["a"]({mode:"history",base:"/mobile-cnode/dist/",routes:j}),S=I,O=a("bc3a"),x=a.n(O);n["a"].config.productionTip=!1,n["a"].prototype.$http=x.a,new n["a"]({router:S,render:function(t){return t(l)}}).$mount("#app"),n["a"].filter("formateDate",(function(t){if(t){var e=new Date(t),a=(new Date).getTime()-e.getTime();return a<0?"":a/1e3<30?"刚刚":a/1e3<60?parseInt(a/1e3)+"秒前":a/6e4<60?parseInt(a/6e4)+"分钟前":a/36e5<24?parseInt(a/36e5)+"小时前":a/864e5<31?parseInt(a/864e5)+"天前":a/2592e6<12?parseInt(a/2592e6)+"月前":void 0}}))},"5c0b":function(t,e,a){"use strict";var n=a("9c0c"),i=a.n(n);i.a},7410:function(t,e,a){"use strict";var n=a("9323"),i=a.n(n);i.a},"7aa8":function(t,e,a){"use strict";var n=a("9e50"),i=a.n(n);i.a},9323:function(t,e,a){},"9c0c":function(t,e,a){},"9e50":function(t,e,a){},cf1c:function(t,e,a){t.exports=a.p+"img/loading.667696a0.gif"},d686:function(t,e,a){t.exports=a.p+"img/cnodejs_light.86f6a7c2.svg"}});
//# sourceMappingURL=app.ede6a5bd.js.map